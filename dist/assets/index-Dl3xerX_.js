const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Header-Df7uJ4z0.js","assets/vendor-5APVzNZg.js","assets/constants-FoW-FSWv.js","assets/icons-BBrol7Dz.js","assets/supabase-7cNBIxai.js","assets/Toaster-CboyGZw8.js","assets/KeyboardShortcuts-jfdUKY-Y.js","assets/OfflineSupport-jnnYBpGZ.js","assets/PerformanceMonitor-BqXPPXwl.js","assets/Home-BjJZE31r.js","assets/Finance-C7TRsnIG.js","assets/LoadingStates-DcX5nDeq.js","assets/ModalSystem-zUQVNNbI.js","assets/format-CfBjB5Ts.js","assets/errorHandler-6EP6Ox9l.js","assets/useSupabaseAuth-Bfp9L3vQ.js","assets/Tasks-Orj6vo5x.js","assets/utils-DyBHi9Eu.js","assets/ModalForm-DKTejzsD.js","assets/TaskViewModal-CkXED2_W.js","assets/Goals-B97FvWiT.js","assets/GoalModal-BS_9G0iT.js","assets/ErrorBoundaries-D-7RlzBh.js","assets/Notes-ClWKSlPr.js","assets/NoteEditorModal-CiD0wB9g.js","assets/Login-C469_Vga.js"])))=>i.map(i=>d[i]);
import{r as s,a as O,R as m,u as I,O as T,b as D,d as z,N as B}from"./vendor-5APVzNZg.js";import{_ as c,c as V}from"./supabase-7cNBIxai.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function o(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=o(a);fetch(a.href,i)}})();var C={exports:{}},y={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F=s,M=Symbol.for("react.element"),$=Symbol.for("react.fragment"),K=Object.prototype.hasOwnProperty,U=F.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,H={key:!0,ref:!0,__self:!0,__source:!0};function L(r,t,o){var n,a={},i=null,l=null;o!==void 0&&(i=""+o),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(l=t.ref);for(n in t)K.call(t,n)&&!H.hasOwnProperty(n)&&(a[n]=t[n]);if(r&&r.defaultProps)for(n in t=r.defaultProps,t)a[n]===void 0&&(a[n]=t[n]);return{$$typeof:M,type:r,key:i,ref:l,props:a,_owner:U.current}}y.Fragment=$;y.jsx=L;y.jsxs=L;C.exports=y;var e=C.exports,R={},N=O;R.createRoot=N.createRoot,R.hydrateRoot=N.hydrateRoot;const k=s.createContext(null);function Y({children:r}){const[t,o]=s.useState([]),n=s.useCallback(l=>{o(d=>d.filter(u=>u.id!==l))},[]),a=s.useCallback(l=>{const d=Math.random().toString(36).slice(2),u={id:d,duration:3e3,...l};o(p=>[...p,u]),u.duration&&setTimeout(()=>n(d),u.duration)},[n]),i=s.useMemo(()=>({toasts:t,push:a,remove:n}),[t,a,n]);return e.jsx(k.Provider,{value:i,children:r})}function be(){const r=s.useContext(k);if(!r)throw new Error("useToast must be used within ToastProvider");return r}class G extends m.Component{constructor(t){super(t),this.state={hasError:!1}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,o){console.error("ErrorBoundary caught an error:",t,o),this.props.onError?.(t,o)}resetError=()=>{this.setState({hasError:!1,error:void 0})};render(){if(this.state.hasError){const t=this.props.fallback||J;return e.jsx(t,{error:this.state.error,resetError:this.resetError})}return this.props.children}}function q({children:r,fallback:t}){return e.jsx(G,{fallback:t?()=>e.jsx(e.Fragment,{children:t}):void 0,children:r})}function J({error:r,resetError:t}){return e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"rounded-xl border bg-white p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"text-red-500 text-2xl",children:"⚠️"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-semibold text-red-600",children:"Что-то пошло не так"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Произошла неожиданная ошибка в приложении"})]})]}),!1,e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:t,className:"btn px-4 py-2 text-sm",children:"Попробовать снова"}),e.jsx("button",{onClick:()=>window.location.reload(),className:"btn-secondary px-4 py-2 text-sm",children:"Обновить страницу"})]})]})})}const _e={ADD:"Добавить",SEARCH:"Поиск"};let W=0;function v(r="id"){return`${r}-${++W}`}function Q(){const r=document.getElementById("aria-live-region");if(r)return r;const t=document.createElement("div");return t.id="aria-live-region",t.setAttribute("aria-live","polite"),t.setAttribute("aria-atomic","true"),t.className="sr-only",t.style.cssText=`
    position: absolute;
    left: -10000px;
    width: 1px;
    height: 1px;
    overflow: hidden;
  `,document.body.appendChild(t),t}function X(r,t="polite"){const o=Q();o.setAttribute("aria-live",t),o.textContent=r,setTimeout(()=>{o.textContent=""},1e3)}const ye={ESCAPE:"Escape"},Z={style:{position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",border:"0"}};function E({href:r,children:t}){return m.createElement("a",{href:r,className:"sr-only focus:not-sr-only focus:absolute focus:top-0 focus:left-0 bg-blue-600 text-white p-2 z-50",style:Z.style},t)}const ee=s.forwardRef(({variant:r="primary",size:t="md",loading:o=!1,className:n="",children:a,ariaLabel:i,ariaDescribedBy:l,announceOnClick:d,onClick:u,disabled:p,...h},b)=>{const g=s.useRef(null),j=s.useCallback(_=>{d&&X(d),u?.(_)},[u,d]),A=m.useMemo(()=>{const _="inline-flex items-center justify-center font-medium rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2",P={primary:"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500",secondary:"bg-gray-200 text-gray-900 hover:bg-gray-300 focus:ring-gray-500",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500",ghost:"bg-transparent text-gray-700 hover:bg-gray-100 focus:ring-gray-500"},w={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"};return[_,P[r],w[t],p||o?"opacity-50 cursor-not-allowed":"",n].filter(Boolean).join(" ")},[r,t,p,o,n]);return e.jsxs("button",{ref:b||g,className:A,disabled:p||o,"aria-label":i,"aria-describedby":l,"aria-disabled":p||o,onClick:j,...h,children:[o&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-current border-t-transparent mr-2"}),e.jsx("span",{className:"sr-only",children:"Загрузка..."})]}),a]})});ee.displayName="AccessibleButton";const te=s.forwardRef(({label:r,error:t,helperText:o,required:n=!1,describedBy:a,className:i="",id:l,...d},u)=>{const p=l||v("input"),h=t?v("error"):void 0,b=o?v("helper"):void 0,g=[a,h,b].filter(Boolean).join(" ")||void 0,j=m.useMemo(()=>`w-full px-3 py-2 border rounded-lg text-sm outline-none transition-colors ${t?"border-red-300 focus:ring-red-500":"border-gray-300 focus:ring-blue-500"} focus:ring-2 focus:border-transparent ${i}`,[t,i]);return e.jsxs("div",{className:"space-y-1",children:[e.jsxs("label",{htmlFor:p,className:"block text-sm font-medium text-gray-700",children:[r,n&&e.jsx("span",{className:"text-red-500 ml-1","aria-label":"обязательное поле",children:"*"})]}),e.jsx("input",{ref:u,id:p,className:j,required:n,"aria-invalid":t?"true":"false","aria-describedby":g,...d}),t&&e.jsx("p",{id:h,className:"text-sm text-red-600",role:"alert",children:t}),o&&!t&&e.jsx("p",{id:b,className:"text-sm text-gray-500",children:o})]})});te.displayName="AccessibleInput";const se=()=>e.jsxs("nav",{"aria-label":"Пропустить навигацию",children:[e.jsx(E,{href:"#main-content",children:"Перейти к основному содержанию"}),e.jsx(E,{href:"#main-navigation",children:"Перейти к главному меню"}),e.jsx(E,{href:"#sidebar",children:"Перейти к боковой панели"})]}),re=s.lazy(()=>c(()=>import("./Header-Df7uJ4z0.js"),__vite__mapDeps([0,1,2,3,4]))),ne=s.lazy(()=>c(()=>import("./Toaster-CboyGZw8.js"),__vite__mapDeps([5,1,4]))),oe=s.lazy(()=>c(()=>import("./KeyboardShortcuts-jfdUKY-Y.js"),__vite__mapDeps([6,1,4]))),ae=s.lazy(()=>c(()=>import("./OfflineSupport-jnnYBpGZ.js"),__vite__mapDeps([7,1,4]))),ie=s.lazy(()=>c(()=>import("./PerformanceMonitor-BqXPPXwl.js"),__vite__mapDeps([8,1,4])));function le(){const t=I().pathname.toLowerCase().includes("finance");return e.jsx(Y,{children:e.jsxs(q,{children:[e.jsx(se,{}),e.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:[e.jsx(s.Suspense,{fallback:e.jsx("div",{className:"h-12 bg-white border-b border-gray-300 animate-pulse"}),children:e.jsx(re,{})}),e.jsx("main",{id:"main-content",className:`flex-1 ${t?"finance-page":""}`,role:"main","aria-label":"Основное содержимое",children:e.jsx(s.Suspense,{fallback:e.jsx("div",{className:"p-4",role:"status","aria-label":"Загрузка содержимого",children:"Загрузка…"}),children:e.jsx(T,{})})})]}),e.jsx(s.Suspense,{fallback:null,children:e.jsx(ne,{})}),e.jsx(s.Suspense,{fallback:null,children:e.jsx(oe,{})}),e.jsx(s.Suspense,{fallback:null,children:e.jsx(ae,{})}),e.jsx(s.Suspense,{fallback:null,children:e.jsx(ie,{})})]})})}const f={Home:s.lazy(()=>c(()=>import("./Home-BjJZE31r.js"),__vite__mapDeps([9,4,1]))),Finance:s.lazy(()=>c(()=>import("./Finance-C7TRsnIG.js"),__vite__mapDeps([10,11,1,12,3,13,14,15,2,4]))),Tasks:s.lazy(()=>c(()=>import("./Tasks-Orj6vo5x.js"),__vite__mapDeps([16,1,17,12,18,3,19,14,15,2,4]))),Goals:s.lazy(()=>c(()=>import("./Goals-B97FvWiT.js"),__vite__mapDeps([20,1,3,21,12,18,4,14,11,22]))),Notes:s.lazy(()=>c(()=>import("./Notes-ClWKSlPr.js"),__vite__mapDeps([23,1,24,12,18,4,14,11,22]))),Login:s.lazy(()=>c(()=>import("./Login-C469_Vga.js"),__vite__mapDeps([25,1,4])))};s.lazy(()=>c(()=>import("./TaskViewModal-CkXED2_W.js").then(r=>r.a),__vite__mapDeps([19,1,12,3]))),s.lazy(()=>c(()=>import("./GoalModal-BS_9G0iT.js"),__vite__mapDeps([21,1,12,18,4]))),s.lazy(()=>c(()=>import("./NoteEditorModal-CiD0wB9g.js"),__vite__mapDeps([24,1,12,18,4])));const ce=void 0,de=void 0;console.error("[supabaseClient] Missing VITE_SUPABASE_URL or VITE_SUPABASE_ANON_KEY");const S=V(ce,de);function ue(){if(typeof window>"u")return;["/finance","/tasks","/goals","/notes"].forEach(o=>{const n=document.createElement("link");n.rel="prefetch",n.href=o,document.head.appendChild(n)}),[].forEach(o=>{const n=document.createElement("link");n.rel="preload",n.href=o,n.as="image",document.head.appendChild(n)})}ue();const x=()=>e.jsxs("div",{className:"flex items-center justify-center p-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-blue-600 border-t-transparent"}),e.jsx("span",{className:"ml-3 text-gray-600",children:"Загрузка..."})]}),pe=({children:r})=>{const[t,o]=m.useState(!0),[n,a]=m.useState(!1);return m.useEffect(()=>{S.auth.getSession().then(({data:l})=>{a(!!l.session),o(!1)});const{data:i}=S.auth.onAuthStateChange((l,d)=>{a(!!d)});return()=>{i.subscription.unsubscribe()}},[]),t?e.jsx("div",{className:"p-8 text-gray-300",children:"Загрузка..."}):n?e.jsx(e.Fragment,{children:r}):e.jsx(B,{to:"/login",replace:!0})},me=D([{path:"/login",element:e.jsx(s.Suspense,{fallback:e.jsx(x,{}),children:e.jsx(f.Login,{})})},{path:"/",element:e.jsx(pe,{children:e.jsx(le,{})}),children:[{index:!0,element:e.jsx(s.Suspense,{fallback:e.jsx(x,{}),children:e.jsx(f.Home,{})})},{path:"finance",element:e.jsx(s.Suspense,{fallback:e.jsx(x,{}),children:e.jsx(f.Finance,{})})},{path:"tasks",element:e.jsx(s.Suspense,{fallback:e.jsx(x,{}),children:e.jsx(f.Tasks,{})})},{path:"goals",element:e.jsx(s.Suspense,{fallback:e.jsx(x,{}),children:e.jsx(f.Goals,{})})},{path:"notes",element:e.jsx(s.Suspense,{fallback:e.jsx(x,{}),children:e.jsx(f.Notes,{})})}]}]);R.createRoot(document.getElementById("root")).render(e.jsx(m.StrictMode,{children:e.jsx(z,{router:me})}));export{ee as A,ye as K,X as a,_e as b,te as c,e as j,S as s,be as u};
