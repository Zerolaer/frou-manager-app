import{j as e}from"./index-BapEBo7p.js";import{r as s}from"./vendor-CqGws4Uo.js";import{U as M,u as S}from"./ModalSystem-BEGbswy7.js";import{M as C,a as r,b as c,d as y,e as E}from"./ModalForm-DQJ7IiNT.js";import"./supabase-BmeMSZYH.js";function T({open:i,initial:t,onClose:x,onSave:h}){const[l,o]=s.useState(""),[p,n]=s.useState(""),[f,d]=s.useState(""),[m,u]=s.useState(0),[j,g]=s.useState(!1),{createStandardFooter:b}=S();s.useEffect(()=>{t?(o(t.title||""),n(t.description||""),d(t.deadline||""),u(t.progress??0)):(o(""),n(""),d(""),u(0))},[t,i]);async function v(){g(!0);try{await h({title:l,description:p,deadline:f||null,progress:m},t?.id?.toString())}finally{g(!1)}}return e.jsx(M,{open:i,onClose:x,title:t?"Редактировать цель":"Новая цель",footer:b({label:t?"Сохранить":"Создать",onClick:v,loading:j,disabled:!l.trim()},{label:"Отмена",onClick:x}),children:e.jsxs(C,{children:[e.jsx(r,{label:"Название",required:!0,children:e.jsx(c,{value:l,onChange:a=>o(a.target.value),placeholder:"Например, Сбросить 5 кг"})}),e.jsx(r,{label:"Описание",children:e.jsx(y,{value:p,onChange:a=>n(a.target.value),rows:3})}),e.jsxs(E,{cols:2,children:[e.jsx(r,{label:"Дедлайн",children:e.jsx(c,{type:"date",value:f??"",onChange:a=>d(a.target.value)})}),e.jsx(r,{label:"Прогресс (%)",children:e.jsx(c,{type:"number",min:0,max:100,value:m,onChange:a=>u(Number(a.target.value))})})]})]})})}export{T as default};
