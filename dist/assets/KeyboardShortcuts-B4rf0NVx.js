import{K as x,j as e}from"./index-B1jK0nAM.js";import{r as l,R as p}from"./vendor-CqGws4Uo.js";import"./supabase-BmeMSZYH.js";function h(){l.useEffect(()=>{const n=t=>{const c=t.target;if(!(c.tagName==="INPUT"||c.tagName==="TEXTAREA"||c.contentEditable==="true")){if((t.ctrlKey||t.metaKey)&&t.key==="k"){t.preventDefault();const s=document.querySelector('input[type="search"], input[placeholder*="Поиск"]');s&&s.focus()}if(t.key===x.ESCAPE){const s=document.querySelector('[role="dialog"]');if(s){const o=s.querySelector('button[aria-label*="Закрыть"], button[aria-label*="Отмена"]');o&&o.click()}}if(t.altKey&&/^[1-5]$/.test(t.key)){t.preventDefault();const s=document.querySelectorAll("#main-navigation a[href]"),o=parseInt(t.key)-1;s[o]&&s[o].click()}if(t.altKey&&t.key.toLowerCase()==="h"){t.preventDefault();const s=document.querySelector('#main-navigation a[href="/"]');s&&s.click()}}};return document.addEventListener("keydown",n),()=>document.removeEventListener("keydown",n)},[])}const f=({show:n=!1,onToggle:t})=>{const[c,s]=l.useState(n);if(h(),l.useEffect(()=>{const r=a=>{(a.ctrlKey||a.metaKey)&&a.key==="?"&&(a.preventDefault(),s(i=>!i),t?.())};return document.addEventListener("keydown",r),()=>document.removeEventListener("keydown",r)},[t]),!c)return null;const y=[{keys:["Ctrl","K"],description:"Фокус на поиск",category:"Навигация"},{keys:["Alt","1"],description:"Главная",category:"Навигация"},{keys:["Alt","2"],description:"Финансы",category:"Навигация"},{keys:["Alt","3"],description:"Задачи",category:"Навигация"},{keys:["Alt","4"],description:"Заметки",category:"Навигация"},{keys:["Alt","5"],description:"Цели",category:"Навигация"},{keys:["Alt","H"],description:"Главная страница",category:"Навигация"},{keys:["Escape"],description:"Закрыть модальное окно",category:"Общие"},{keys:["Tab"],description:"Переход к следующему элементу",category:"Навигация"},{keys:["Shift","Tab"],description:"Переход к предыдущему элементу",category:"Навигация"},{keys:["Enter"],description:"Активировать элемент",category:"Общие"},{keys:["Space"],description:"Активировать кнопку",category:"Общие"}].reduce((r,a)=>(r[a.category]||(r[a.category]=[]),r[a.category].push(a),r),{});return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:()=>s(!1),role:"dialog","aria-modal":"true","aria-labelledby":"shortcuts-title",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-2xl max-h-[80vh] overflow-hidden",onClick:r=>r.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[e.jsx("h2",{id:"shortcuts-title",className:"text-xl font-semibold",children:"Клавиатурные сокращения"}),e.jsx("button",{onClick:()=>s(!1),className:"text-gray-400 hover:text-gray-600 text-xl","aria-label":"Закрыть",children:"✕"})]}),e.jsxs("div",{className:"p-6 overflow-y-auto max-h-[60vh]",children:[e.jsx("div",{className:"space-y-6",children:Object.entries(y).map(([r,a])=>e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:r}),e.jsx("div",{className:"space-y-2",children:a.map((i,m)=>e.jsxs("div",{className:"flex items-center justify-between py-2",children:[e.jsx("span",{className:"text-gray-700",children:i.description}),e.jsx("div",{className:"flex items-center gap-1",children:i.keys.map((u,d)=>e.jsxs(p.Fragment,{children:[d>0&&e.jsx("span",{className:"text-gray-400 mx-1",children:"+"}),e.jsx("kbd",{className:"px-2 py-1 text-xs font-mono bg-gray-100 border border-gray-300 rounded",children:u})]},d))})]},m))})]},r))}),e.jsx("div",{className:"mt-6 pt-6 border-t",children:e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("kbd",{className:"px-2 py-1 text-xs font-mono bg-gray-100 border border-gray-300 rounded",children:"Ctrl"}),e.jsx("span",{className:"mx-1",children:"+"}),e.jsx("kbd",{className:"px-2 py-1 text-xs font-mono bg-gray-100 border border-gray-300 rounded",children:"?"}),e.jsx("span",{className:"ml-2",children:"для показа/скрытия этого окна"})]})})]})]})})};function j(){const[n,t]=l.useState(!1);return{showShortcuts:n,toggleShortcuts:()=>{t(o=>!o)},KeyboardShortcutsComponent:()=>e.jsx(f,{show:n,onToggle:()=>t(!1)})}}export{f as default,j as useKeyboardShortcuts};
