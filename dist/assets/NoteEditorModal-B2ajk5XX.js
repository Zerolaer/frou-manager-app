import{r as e,j as l}from"./index-ByxKddn8.js";import{u as M,U as v}from"./ModalSystem-9TS_SLlg.js";import{M as S,a as p,b as w,d as C}from"./ModalForm-wqdqc5tQ.js";function L({open:b,note:a,onClose:t,onSave:g,onDelete:s}){const[i,r]=e.useState((a==null?void 0:a.title)??""),[c,u]=e.useState((a==null?void 0:a.content)??""),[n,f]=e.useState(!1),[x,h]=e.useState(!1),{createStandardFooter:o}=M();e.useEffect(()=>{r((a==null?void 0:a.title)??""),u((a==null?void 0:a.content)??"")},[a]);async function m(){f(!0);try{await g({title:i,content:c},a==null?void 0:a.id),t()}finally{f(!1)}}async function j(){if(!(!(a!=null&&a.id)||!s)){h(!0);try{await s(a.id),t()}finally{h(!1)}}}const y=o({label:"Сохранить",onClick:m,loading:n,disabled:!i.trim()},{label:"Отмена",onClick:t},a!=null&&a.id&&s?l.jsx("button",{type:"button",className:"px-4 py-2 text-sm rounded-lg bg-red-600 text-white hover:bg-red-700 disabled:opacity-50",onClick:j,disabled:x,children:x?"Удаляю...":"Удалить"}):void 0);return l.jsx(v,{open:b,onClose:t,title:a?"Редактировать заметку":"Новая заметка",size:"lg",footer:y,children:l.jsxs(S,{children:[l.jsx(p,{label:"Заголовок",required:!0,children:l.jsx(w,{value:i,onChange:d=>r(d.target.value),placeholder:"Заголовок заметки",autoFocus:!0})}),l.jsx(p,{label:"Содержимое",children:l.jsx(C,{value:c,onChange:d=>u(d.target.value),placeholder:"Текст заметки… Поддерживается перенос строк.",rows:12})})]})})}export{L as default};
