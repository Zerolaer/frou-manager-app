import{r as s,j as t}from"./index-ByxKddn8.js";import{U as k,u as D}from"./ModalSystem-9TS_SLlg.js";import{M as F,a as r,b as x,d as G,e as y,c as M}from"./ModalForm-wqdqc5tQ.js";const P=["Здоровье","Финансы","Работа","Обучение","Прочее"],T=["low","medium","high"];function I({open:g,initial:a,onClose:m,onSave:S}){const[o,l]=s.useState(""),[j,d]=s.useState(""),[p,n]=s.useState(""),[v,c]=s.useState(""),[u,i]=s.useState(0),[f,h]=s.useState("medium"),[C,b]=s.useState(!1),{createStandardFooter:w}=D();s.useEffect(()=>{a?(l(a.title||""),d(a.description||""),n(a.category||"Прочее"),c(a.deadline||""),i(a.progress??0),h(a.priority??"medium")):(l(""),d(""),n(""),c(""),i(0),h("medium"))},[a,g]);async function E(){b(!0);try{await S({title:o,description:j,category:p||"Прочее",deadline:v||null,progress:u,priority:f,status:u>=100?"completed":"active"},a==null?void 0:a.id)}finally{b(!1)}}return t.jsx(k,{open:g,onClose:m,title:a?"Редактировать цель":"Новая цель",footer:w({label:a?"Сохранить":"Создать",onClick:E,loading:C,disabled:!o.trim()},{label:"Отмена",onClick:m}),children:t.jsxs(F,{children:[t.jsx(r,{label:"Название",required:!0,children:t.jsx(x,{value:o,onChange:e=>l(e.target.value),placeholder:"Например, Сбросить 5 кг"})}),t.jsx(r,{label:"Описание",children:t.jsx(G,{value:j,onChange:e=>d(e.target.value),rows:3})}),t.jsxs(y,{cols:2,children:[t.jsx(r,{label:"Категория",children:t.jsxs(M,{value:p,onChange:e=>n(e.target.value),children:[t.jsx("option",{value:"",children:"Выбрать…"}),P.map(e=>t.jsx("option",{value:e,children:e},e))]})}),t.jsx(r,{label:"Дедлайн",children:t.jsx(x,{type:"date",value:v??"",onChange:e=>c(e.target.value)})})]}),t.jsxs(y,{cols:2,children:[t.jsx(r,{label:"Прогресс (%)",children:t.jsx(x,{type:"number",min:0,max:100,value:u,onChange:e=>i(Number(e.target.value))})}),t.jsx(r,{label:"Приоритет",children:t.jsx(M,{value:f,onChange:e=>h(e.target.value),children:T.map(e=>t.jsx("option",{value:e,children:e},e))})})]})]})})}export{I as default};
