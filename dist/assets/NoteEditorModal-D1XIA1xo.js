import{j as t}from"./index-Cxov-ftt.js";import{r as l}from"./vendor-CqGws4Uo.js";import{u as S,U as k}from"./ModalSystem-CstZ7D6m.js";import{M as v,a as p,b as C,d as E}from"./ModalForm-B04g-v3H.js";import"./supabase-BmeMSZYH.js";function q({open:x,note:e,onClose:a,onSave:b,onDelete:r}){const[i,o]=l.useState(e?.title??""),[n,d]=l.useState(e?.content??""),[c,u]=l.useState(!1),[f,m]=l.useState(!1),{createStandardFooter:h,createDangerFooter:j}=S();l.useEffect(()=>{o(e?.title??""),d(e?.content??"")},[e]);async function g(){u(!0);try{await b({title:i,content:n},e?.id),a()}finally{u(!1)}}async function M(){if(!(!e?.id||!r)){m(!0);try{await r(e.id),a()}finally{m(!1)}}}const y=e?.id&&r?j({label:f?"Удаляю...":"Удалить",onClick:M,loading:f},{label:"Сохранить",onClick:g,loading:c,disabled:!i.trim()},{label:"Отмена",onClick:a}):h({label:"Сохранить",onClick:g,loading:c,disabled:!i.trim()},{label:"Отмена",onClick:a});return t.jsx(k,{open:x,onClose:a,title:e?"Редактировать заметку":"Новая заметка",size:"lg",footer:y,children:t.jsxs(v,{children:[t.jsx(p,{label:"Заголовок",required:!0,children:t.jsx(C,{value:i,onChange:s=>o(s.target.value),placeholder:"Заголовок заметки",autoFocus:!0})}),t.jsx(p,{label:"Содержимое",children:t.jsx(E,{value:n,onChange:s=>d(s.target.value),placeholder:"Текст заметки… Поддерживается перенос строк.",rows:12})})]})})}export{q as default};
