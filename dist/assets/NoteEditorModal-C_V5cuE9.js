import{j as t}from"./index-VPEx-n7V.js";import{r as l}from"./vendor-5APVzNZg.js";import{u as S,U as k}from"./ModalSystem-MuhGFQDn.js";import{M as v,a as g,b as C,d as E}from"./ModalForm-CPPU03v3.js";import"./supabase-7cNBIxai.js";import"./icons-BBrol7Dz.js";function z({open:x,note:e,onClose:a,onSave:b,onDelete:r}){const[i,o]=l.useState(e?.title??""),[n,d]=l.useState(e?.content??""),[c,u]=l.useState(!1),[f,m]=l.useState(!1),{createStandardFooter:h,createDangerFooter:j}=S();l.useEffect(()=>{o(e?.title??""),d(e?.content??"")},[e]);async function p(){u(!0);try{await b({title:i,content:n},e?.id),a()}finally{u(!1)}}async function M(){if(!(!e?.id||!r)){m(!0);try{await r(e.id),a()}finally{m(!1)}}}const y=e?.id&&r?j({label:f?"Удаляю...":"Удалить",onClick:M,loading:f},{label:"Сохранить",onClick:p,loading:c,disabled:!i.trim()},{label:"Отмена",onClick:a}):h({label:"Сохранить",onClick:p,loading:c,disabled:!i.trim()},{label:"Отмена",onClick:a});return t.jsx(k,{open:x,onClose:a,title:e?"Редактировать заметку":"Новая заметка",size:"lg",footer:y,children:t.jsxs(v,{children:[t.jsx(g,{label:"Заголовок",required:!0,children:t.jsx(C,{value:i,onChange:s=>o(s.target.value),placeholder:"Заголовок заметки",autoFocus:!0})}),t.jsx(g,{label:"Содержимое",children:t.jsx(E,{value:n,onChange:s=>d(s.target.value),placeholder:"Текст заметки… Поддерживается перенос строк.",rows:12})})]})})}export{z as default};
