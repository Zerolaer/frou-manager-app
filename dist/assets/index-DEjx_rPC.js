const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Header-DtqQAec-.js","assets/vendor-CqGws4Uo.js","assets/supabase-BmeMSZYH.js","assets/Sidebar-BHh-8q6O.js","assets/constants-FoW-FSWv.js","assets/icons-BC5Gm12n.js","assets/Sidebar-CXWw5k3I.css","assets/Toaster-BgNx0hcL.js","assets/KeyboardShortcuts-y3f-npo5.js","assets/OfflineSupport-hyVs0DmQ.js","assets/PerformanceMonitor-B7kJ37Yl.js","assets/Home-C7IXZZlw.js","assets/Finance-D1pBuBYr.js","assets/ModalSystem-C_RBbtD1.js","assets/format-CfBjB5Ts.js","assets/errorHandler-Cx-r6NKo.js","assets/useSupabaseAuth-B2dq7EbK.js","assets/Finance-BKl2vEEo.css","assets/Tasks-CgcsLysq.js","assets/utils-DyBHi9Eu.js","assets/ModalForm-CkGhW_bH.js","assets/TaskViewModal-CMQfo4aX.js","assets/Tasks-CTT27dTr.css","assets/Goals-C6BXFT-L.js","assets/GoalModal-ESAx8-uU.js","assets/LoadingStates-Dn4_dbd3.js","assets/Notes-D3CgyDYG.js","assets/NoteEditorModal-CPpjrHSu.js","assets/Login-Dtzrndzr.js"])))=>i.map(i=>d[i]);
import{r as s,a as k,R as m,u as O,O as D,b as z,d as V,N as B}from"./vendor-CqGws4Uo.js";import{_ as c,c as $}from"./supabase-BmeMSZYH.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();var I={exports:{}},g={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var M=s,F=Symbol.for("react.element"),K=Symbol.for("react.fragment"),U=Object.prototype.hasOwnProperty,H=M.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Y={key:!0,ref:!0,__self:!0,__source:!0};function L(a,t,n){var r,o={},i=null,l=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(l=t.ref);for(r in t)U.call(t,r)&&!Y.hasOwnProperty(r)&&(o[r]=t[r]);if(a&&a.defaultProps)for(r in t=a.defaultProps,t)o[r]===void 0&&(o[r]=t[r]);return{$$typeof:F,type:a,key:i,ref:l,props:o,_owner:H.current}}g.Fragment=K;g.jsx=L;g.jsxs=L;I.exports=g;var e=I.exports,N={},C=k;N.createRoot=C.createRoot,N.hydrateRoot=C.hydrateRoot;const be={ADD:"Добавить",SEARCH:"Поиск"};let G=0;function E(a="id"){return`${a}-${++G}`}function W(){const a=document.getElementById("aria-live-region");if(a)return a;const t=document.createElement("div");return t.id="aria-live-region",t.setAttribute("aria-live","polite"),t.setAttribute("aria-atomic","true"),t.className="sr-only",t.style.cssText=`
    position: absolute;
    left: -10000px;
    width: 1px;
    height: 1px;
    overflow: hidden;
  `,document.body.appendChild(t),t}function q(a,t="polite"){const n=W();n.setAttribute("aria-live",t),n.textContent=a,setTimeout(()=>{n.textContent=""},1e3)}const ye={ESCAPE:"Escape"},J={style:{position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",border:"0"}};function R({href:a,children:t}){return m.createElement("a",{href:a,className:"sr-only focus:not-sr-only focus:absolute focus:top-0 focus:left-0 bg-blue-600 text-white p-2 z-50",style:J.style},t)}const _=s.forwardRef(({variant:a="primary",size:t="md",loading:n=!1,className:r="",children:o,ariaLabel:i,ariaDescribedBy:l,announceOnClick:d,onClick:u,disabled:p,...x},b)=>{const j=s.useRef(null),v=s.useCallback(y=>{d&&q(d),u?.(y)},[u,d]),S=m.useMemo(()=>{const y="inline-flex items-center justify-center font-medium rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2",w={primary:"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500",secondary:"bg-gray-200 text-gray-900 hover:bg-gray-300 focus:ring-gray-500",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500",ghost:"bg-transparent text-gray-700 hover:bg-gray-100 focus:ring-gray-500"},P={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"};return[y,w[a],P[t],p||n?"opacity-50 cursor-not-allowed":"",r].filter(Boolean).join(" ")},[a,t,p,n,r]);return e.jsxs("button",{ref:b||j,className:S,disabled:p||n,"aria-label":i,"aria-describedby":l,"aria-disabled":p||n,onClick:v,...x,children:[n&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-current border-t-transparent mr-2"}),e.jsx("span",{className:"sr-only",children:"Загрузка..."})]}),o]})});_.displayName="AccessibleButton";const Q=s.forwardRef(({label:a,error:t,helperText:n,required:r=!1,describedBy:o,className:i="",id:l,...d},u)=>{const p=l||E("input"),x=t?E("error"):void 0,b=n?E("helper"):void 0,j=[o,x,b].filter(Boolean).join(" ")||void 0,v=m.useMemo(()=>`w-full px-3 py-2 border rounded-lg text-sm outline-none transition-colors ${t?"border-red-300 focus:ring-red-500":"border-gray-300 focus:ring-blue-500"} focus:ring-2 focus:border-transparent ${i}`,[t,i]);return e.jsxs("div",{className:"space-y-1",children:[e.jsxs("label",{htmlFor:p,className:"block text-sm font-medium text-gray-700",children:[a,r&&e.jsx("span",{className:"text-red-500 ml-1","aria-label":"обязательное поле",children:"*"})]}),e.jsx("input",{ref:u,id:p,className:v,required:r,"aria-invalid":t?"true":"false","aria-describedby":j,...d}),t&&e.jsx("p",{id:x,className:"text-sm text-red-600",role:"alert",children:t}),n&&!t&&e.jsx("p",{id:b,className:"text-sm text-gray-500",children:n})]})});Q.displayName="AccessibleInput";const X=()=>e.jsxs("nav",{"aria-label":"Пропустить навигацию",children:[e.jsx(R,{href:"#main-content",children:"Перейти к основному содержанию"}),e.jsx(R,{href:"#main-navigation",children:"Перейти к главному меню"}),e.jsx(R,{href:"#sidebar",children:"Перейти к боковой панели"})]});class Z extends s.Component{retryTimeoutId=null;constructor(t){super(t),this.state={hasError:!1,retryCount:0}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,n){const{pageName:r,onError:o,maxRetries:i=3}=this.props,{retryCount:l}=this.state;console.error(`Error in ${r}:`,t,n),o?.(t,n),l<i&&(this.retryTimeoutId=setTimeout(()=>{this.setState(d=>({hasError:!1,error:void 0,errorInfo:void 0,retryCount:d.retryCount+1}))},Math.pow(2,l)*1e3))}componentWillUnmount(){this.retryTimeoutId&&clearTimeout(this.retryTimeoutId)}handleRetry=()=>{this.setState({hasError:!1,error:void 0,errorInfo:void 0,retryCount:this.state.retryCount+1})};handleReset=()=>{this.setState({hasError:!1,error:void 0,errorInfo:void 0,retryCount:0})};render(){if(this.state.hasError){const{pageName:t,fallback:n}=this.props,{error:r,retryCount:o}=this.state;return n||e.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:e.jsxs("div",{className:"max-w-md w-full bg-white rounded-xl shadow-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"text-red-500 text-2xl",children:"⚠️"}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-lg font-semibold text-red-600",children:["Ошибка в ",t]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Произошла неожиданная ошибка. Попробуйте обновить страницу."})]})]}),!1,e.jsxs("div",{className:"flex gap-2",children:[e.jsx(_,{variant:"primary",size:"sm",onClick:this.handleRetry,ariaLabel:`Попробовать снова (попытка ${o+1})`,children:"Попробовать снова"}),e.jsx(_,{variant:"secondary",size:"sm",onClick:this.handleReset,ariaLabel:"Сбросить и начать заново",children:"Сбросить"}),e.jsx(_,{variant:"ghost",size:"sm",onClick:()=>window.location.reload(),ariaLabel:"Обновить страницу",children:"Обновить страницу"})]}),o>0&&e.jsxs("p",{className:"text-xs text-gray-500 mt-3",children:["Попытка ",o," из 3"]})]})})}return this.props.children}}const ee=({children:a})=>e.jsx(Z,{pageName:"Приложение",onError:(t,n)=>{console.error("App error:",t,n)},children:a}),T=s.createContext(null);function te({children:a}){const[t,n]=s.useState([]),r=s.useCallback(l=>{n(d=>d.filter(u=>u.id!==l))},[]),o=s.useCallback(l=>{const d=Math.random().toString(36).slice(2),u={id:d,duration:3e3,...l};n(p=>[...p,u]),u.duration&&setTimeout(()=>r(d),u.duration)},[r]),i=s.useMemo(()=>({toasts:t,push:o,remove:r}),[t,o,r]);return e.jsx(T.Provider,{value:i,children:a})}function _e(){const a=s.useContext(T);if(!a)throw new Error("useToast must be used within ToastProvider");return a}const se=s.lazy(()=>c(()=>import("./Header-DtqQAec-.js"),__vite__mapDeps([0,1,2]))),re=s.lazy(()=>c(()=>import("./Sidebar-BHh-8q6O.js"),__vite__mapDeps([3,1,4,5,2,6]))),oe=s.lazy(()=>c(()=>import("./Toaster-BgNx0hcL.js"),__vite__mapDeps([7,1,2]))),ne=s.lazy(()=>c(()=>import("./KeyboardShortcuts-y3f-npo5.js"),__vite__mapDeps([8,1,2]))),ae=s.lazy(()=>c(()=>import("./OfflineSupport-hyVs0DmQ.js"),__vite__mapDeps([9,1,2]))),ie=s.lazy(()=>c(()=>import("./PerformanceMonitor-B7kJ37Yl.js"),__vite__mapDeps([10,1,2])));function le(){const t=O().pathname.toLowerCase().includes("finance");return e.jsx(te,{children:e.jsxs(ee,{children:[e.jsx(X,{}),e.jsxs("div",{className:`app-shell flex ${t?"finance-mode":""}`,children:[e.jsx(s.Suspense,{fallback:e.jsx("div",{className:"w-64 bg-gray-50 animate-pulse"}),children:e.jsx(re,{})}),e.jsxs("div",{className:"flex-1 min-w-0 flex flex-col",children:[e.jsx(s.Suspense,{fallback:e.jsx("div",{className:"h-16 bg-white border-b border-gray-200 animate-pulse"}),children:e.jsx(se,{})}),e.jsx("main",{id:"main-content",className:`content-scroll p-6 bg-gray-100 ${t?"finance-page":""}`,role:"main","aria-label":"Основное содержимое",children:e.jsx(s.Suspense,{fallback:e.jsx("div",{className:"p-6",role:"status","aria-label":"Загрузка содержимого",children:"Загрузка…"}),children:e.jsx(D,{})})})]})]}),e.jsx(s.Suspense,{fallback:null,children:e.jsx(oe,{})}),e.jsx(s.Suspense,{fallback:null,children:e.jsx(ne,{})}),e.jsx(s.Suspense,{fallback:null,children:e.jsx(ae,{})}),e.jsx(s.Suspense,{fallback:null,children:e.jsx(ie,{})})]})})}const f={Home:s.lazy(()=>c(()=>import("./Home-C7IXZZlw.js"),__vite__mapDeps([11,2,1]))),Finance:s.lazy(()=>c(()=>import("./Finance-D1pBuBYr.js"),__vite__mapDeps([12,1,13,5,14,15,16,4,2,17]))),Tasks:s.lazy(()=>c(()=>import("./Tasks-CgcsLysq.js"),__vite__mapDeps([18,1,19,13,20,5,21,15,16,4,2,22]))),Goals:s.lazy(()=>c(()=>import("./Goals-C6BXFT-L.js"),__vite__mapDeps([23,1,5,24,13,20,2,15,25]))),Notes:s.lazy(()=>c(()=>import("./Notes-D3CgyDYG.js"),__vite__mapDeps([26,1,27,13,20,2,15,25]))),Login:s.lazy(()=>c(()=>import("./Login-Dtzrndzr.js"),__vite__mapDeps([28,1,2])))};s.lazy(()=>c(()=>import("./TaskViewModal-CMQfo4aX.js").then(a=>a.a),__vite__mapDeps([21,1,13,5]))),s.lazy(()=>c(()=>import("./GoalModal-ESAx8-uU.js"),__vite__mapDeps([24,1,13,20,2]))),s.lazy(()=>c(()=>import("./NoteEditorModal-CPpjrHSu.js"),__vite__mapDeps([27,1,13,20,2])));const ce=void 0,de=void 0;console.error("[supabaseClient] Missing VITE_SUPABASE_URL or VITE_SUPABASE_ANON_KEY");const A=$(ce,de);function ue(){if(typeof window>"u")return;["/finance","/tasks","/goals","/notes"].forEach(n=>{const r=document.createElement("link");r.rel="prefetch",r.href=n,document.head.appendChild(r)}),[].forEach(n=>{const r=document.createElement("link");r.rel="preload",r.href=n,r.as="image",document.head.appendChild(r)})}ue();const h=()=>e.jsxs("div",{className:"flex items-center justify-center p-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-blue-600 border-t-transparent"}),e.jsx("span",{className:"ml-3 text-gray-600",children:"Загрузка..."})]}),pe=({children:a})=>{const[t,n]=m.useState(!0),[r,o]=m.useState(!1);return m.useEffect(()=>{A.auth.getSession().then(({data:l})=>{o(!!l.session),n(!1)});const{data:i}=A.auth.onAuthStateChange((l,d)=>{o(!!d)});return()=>{i.subscription.unsubscribe()}},[]),t?e.jsx("div",{className:"p-8 text-gray-300",children:"Загрузка..."}):r?e.jsx(e.Fragment,{children:a}):e.jsx(B,{to:"/login",replace:!0})},me=z([{path:"/login",element:e.jsx(s.Suspense,{fallback:e.jsx(h,{}),children:e.jsx(f.Login,{})})},{path:"/",element:e.jsx(pe,{children:e.jsx(le,{})}),children:[{index:!0,element:e.jsx(s.Suspense,{fallback:e.jsx(h,{}),children:e.jsx(f.Home,{})})},{path:"finance",element:e.jsx(s.Suspense,{fallback:e.jsx(h,{}),children:e.jsx(f.Finance,{})})},{path:"tasks",element:e.jsx(s.Suspense,{fallback:e.jsx(h,{}),children:e.jsx(f.Tasks,{})})},{path:"goals",element:e.jsx(s.Suspense,{fallback:e.jsx(h,{}),children:e.jsx(f.Goals,{})})},{path:"notes",element:e.jsx(s.Suspense,{fallback:e.jsx(h,{}),children:e.jsx(f.Notes,{})})}]}]);N.createRoot(document.getElementById("root")).render(e.jsx(m.StrictMode,{children:e.jsx(V,{router:me})}));export{_ as A,ye as K,Z as P,q as a,be as b,Q as c,e as j,A as s,_e as u};
