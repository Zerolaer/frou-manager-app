import{s as l,j as e,A as x}from"./index-Dl3xerX_.js";import{u as d,r as o,L as c}from"./vendor-5APVzNZg.js";import{A as u}from"./constants-FoW-FSWv.js";import{H as h,W as b,L as f,S as g,G as p,U as j,a as N}from"./icons-BBrol7Dz.js";import"./supabase-7cNBIxai.js";function y(){try{const n=Object.keys(localStorage);for(const s of n)(s.startsWith?s.startsWith("finance:"):s.indexOf("finance:")===0)&&localStorage.removeItem(s)}catch{}}const v=[{to:"/",label:"Главная",icon:h},{to:"/finance",label:"Финансы",icon:b},{to:"/tasks",label:"Задачи",icon:f},{to:"/notes",label:"Заметки",icon:g},{to:"/goals",label:"Цели",icon:p}];function E(){const n=d(),[s,r]=o.useState(null);o.useEffect(()=>{l.auth.getUser().then(({data:a})=>{r(a.user?.email??null)});const{data:t}=l.auth.onAuthStateChange((a,i)=>{r(i?.user?.email??null)});return()=>{t.subscription.unsubscribe()}},[]);async function m(){await l.auth.signOut(),y(),window.location.href="/login"}return e.jsxs("header",{className:"bg-white border-b border-gray-300 px-4 py-3 flex items-center justify-between",role:"banner","aria-label":"Заголовок страницы",style:{minHeight:"48px"},children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs(c,{to:"/",className:"flex items-center gap-2 text-gray-900 hover:text-blue-600 transition-colors",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-600 text-white rounded flex items-center justify-center text-sm font-bold",children:"F"}),e.jsx("span",{className:"font-semibold text-lg",children:u})]}),e.jsx("nav",{className:"hidden md:flex items-center gap-1",role:"navigation","aria-label":"Основное меню",children:v.map(t=>{const a=n.pathname===t.to,i=t.icon;return e.jsxs(c,{to:t.to,className:`
                  flex items-center gap-2 px-3 py-2 text-sm font-medium rounded transition-colors
                  ${a?"bg-blue-50 text-blue-700 border border-blue-200":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}
                `,"aria-current":a?"page":void 0,children:[e.jsx(i,{className:"w-4 h-4"}),t.label]},t.to)})})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(j,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline","aria-label":`Пользователь: ${s??"неизвестно"}`,children:s?.split("@")[0]??"—"})]}),e.jsxs(x,{variant:"ghost",size:"sm",onClick:m,ariaLabel:"Выйти из системы",announceOnClick:"Выход из системы",className:"flex items-center gap-2 text-gray-600 hover:text-red-600",children:[e.jsx(N,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Выйти"})]})]})]})}export{E as default};
