import{j as e,s as u}from"./index-CSodySz9.js";import{r as a,f as p}from"./vendor-CqGws4Uo.js";import"./supabase-BmeMSZYH.js";function b({title:l,subTitle:i,children:n,footer:r}){return e.jsxs("div",{className:"w-full max-w-md bg-white/90 backdrop-blur rounded-2xl shadow-xl border border-gray-200",children:[e.jsxs("div",{className:"px-5 pt-5",children:[e.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:l}),i&&e.jsx("div",{className:"text-sm text-gray-500 mt-1",children:i})]}),e.jsx("div",{className:"h-px bg-gray-200 my-4"}),e.jsx("div",{className:"px-5 pb-4",children:n}),r&&e.jsx("div",{className:"h-px bg-gray-200 my-4"}),r&&e.jsx("div",{className:"px-5 pb-5",children:r})]})}function N(){const[l,i]=a.useState(""),[n,r]=a.useState(""),[d,c]=a.useState(!1),[o,x]=a.useState(null),m=p(),[h,g]=a.useState(!1);a.useEffect(()=>{let s=!0;return u.auth.getSession().then(({data:t})=>{s&&(t.session?m("/finance",{replace:!0}):g(!0))}),()=>{s=!1}},[]);async function f(s){s.preventDefault(),x(null),c(!0);try{const{error:t}=await u.auth.signInWithPassword({email:l,password:n});if(t)throw t;m("/finance",{replace:!0})}catch(t){x(t?.message||"Ошибка входа. Проверьте email и пароль.")}finally{c(!1)}}return h?e.jsx("div",{className:"min-h-screen relative flex items-center justify-center bg-gradient-to-br from-slate-50 via-white to-sky-50",children:e.jsx("div",{className:"w-full px-4",children:e.jsxs("div",{className:"mx-auto max-w-md",children:[e.jsx("div",{className:"mb-6 text-center select-none",children:e.jsxs("div",{className:"inline-flex items-center gap-3",children:[e.jsx("div",{className:"h-11 w-11 rounded-2xl bg-gradient-to-br from-sky-500 to-indigo-500 flex items-center justify-center shadow-md",children:e.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",children:e.jsx("path",{d:"M7 6h10v3H10v3h6v3h-6v3H7V6z",fill:"white"})})}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"text-3xl font-semibold tracking-tight text-gray-900",children:"FROU"}),e.jsx("div",{className:"text-sm text-gray-500 -mt-0.5",children:"Your daily helpdesk"})]})]})}),e.jsxs(b,{title:"Вход в аккаунт",subTitle:"Введите email и пароль",footer:e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-300 cursor-not-allowed select-none","aria-disabled":!0,children:"Войти по ссылке (скоро)"}),e.jsx("span",{className:"text-gray-300 cursor-not-allowed select-none","aria-disabled":!0,children:"Забыли пароль (скоро)"})]}),children:[o&&e.jsx("div",{className:"mb-3 text-sm text-red-700 bg-red-50 border border-red-200 rounded-lg px-3 py-2",children:o}),e.jsxs("form",{onSubmit:f,className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Email"}),e.jsx("input",{type:"email",placeholder:"you@example.com",value:l,onChange:s=>i(s.target.value),required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-sky-200"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Пароль"}),e.jsx("input",{type:"password",placeholder:"••••••••",value:n,onChange:s=>r(s.target.value),required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-sky-200"})]}),e.jsx("button",{className:"btn w-full mt-2 disabled:opacity-60",disabled:d,children:d?"Загрузка…":"Войти"})]})]}),e.jsx("div",{className:"text-center text-xs text-gray-500 mt-6",children:"FROU • Защищено Supabase • Netlify"})]})})}):e.jsx("div",{className:"min-h-screen bg-white"})}export{N as default};
