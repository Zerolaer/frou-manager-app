import{j as e}from"./index-VPEx-n7V.js";import{r as s}from"./vendor-5APVzNZg.js";import{U as M,u as S}from"./ModalSystem-MuhGFQDn.js";import{M as C,a as r,b as c,d as y,e as E}from"./ModalForm-CPPU03v3.js";import"./supabase-7cNBIxai.js";import"./icons-BBrol7Dz.js";function U({open:i,initial:t,onClose:p,onSave:h}){const[l,o]=s.useState(""),[x,n]=s.useState(""),[m,d]=s.useState(""),[f,u]=s.useState(0),[j,g]=s.useState(!1),{createStandardFooter:b}=S();s.useEffect(()=>{t?(o(t.title||""),n(t.description||""),d(t.deadline||""),u(t.progress??0)):(o(""),n(""),d(""),u(0))},[t,i]);async function v(){g(!0);try{await h({title:l,description:x,deadline:m||null,progress:f},t?.id?.toString())}finally{g(!1)}}return e.jsx(M,{open:i,onClose:p,title:t?"Редактировать цель":"Новая цель",footer:b({label:t?"Сохранить":"Создать",onClick:v,loading:j,disabled:!l.trim()},{label:"Отмена",onClick:p}),children:e.jsxs(C,{children:[e.jsx(r,{label:"Название",required:!0,children:e.jsx(c,{value:l,onChange:a=>o(a.target.value),placeholder:"Например, Сбросить 5 кг"})}),e.jsx(r,{label:"Описание",children:e.jsx(y,{value:x,onChange:a=>n(a.target.value),rows:3})}),e.jsxs(E,{cols:2,children:[e.jsx(r,{label:"Дедлайн",children:e.jsx(c,{type:"date",value:m??"",onChange:a=>d(a.target.value)})}),e.jsx(r,{label:"Прогресс (%)",children:e.jsx(c,{type:"number",min:0,max:100,value:f,onChange:a=>u(Number(a.target.value))})})]})]})})}export{U as default};
