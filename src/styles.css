
@tailwind base;
@tailwind components;
@tailwind utilities;

/* Performance optimizations */
* {
  box-sizing: border-box;
}

html {
  font-display: swap;
}

body {
  font-display: swap;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* Critical CSS for above-the-fold content */
.app-shell {
  contain: layout style paint;
}

.content-scroll {
  contain: layout style;
}

/* Optimize animations */
@media (prefers-reduced-motion: reduce) {
  * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

/* Reset / base */
*, *::before, *::after { box-sizing: border-box; }
html, body, #root { height: 100%; }
html, body { margin: 0; padding: 0; }
body { @apply bg-gray-100 text-gray-900 font-[Inter]; overflow: hidden; font-size:14px; line-height:1.4; }

/* Shell & content */
.app-shell { height: 100vh; width: 100vw; overflow: hidden; }
.content-scroll { height: calc(100vh - 56px); overflow: hidden; }
.card { @apply bg-white rounded-xl p-4 shadow border border-gray-200; }

/* --- Sidebar --- */
.sidebar{ width:240px; transition: width .18s ease; }
.sidebar-collapsed{ width:84px; }
.brand-title{ @apply text-xl font-extrabold tracking-tight text-gray-900; letter-spacing: -0.02em; }
.brand-sub{ @apply text-xs text-gray-500; }
.collapse-btn{ @apply rounded-md p-2 text-gray-600 hover:bg-gray-100 hover:text-gray-900 border border-transparent; }

/* Sidebar links */
.sidebar-link { @apply flex items-center gap-3 px-3 py-2 rounded-lg transition font-medium text-gray-600; }
.sidebar-link:hover { @apply bg-gray-100 text-gray-900; }
.sidebar-link.active { background: #2563eb; color: white; box-shadow: 0 2px 6px rgba(37,99,235,0.4); }
.sidebar-collapsed .sidebar-link { @apply justify-center; }
.sidebar-link.is-collapsed .label{ display:none; }

/* Tables */
table { @apply w-full text-left border-collapse; }
th { @apply text-xs md:text-sm font-semibold text-gray-600 border-b border-gray-200 px-3 md:px-4 py-2; white-space: nowrap; }
td { @apply text-xs md:text-sm text-gray-800 border-b border-gray-100 px-3 md:px-4 py-2; white-space: nowrap; }
tr:hover td { @apply bg-gray-50; }

/* Buttons */
button { @apply rounded-lg px-3 py-1.5 transition font-medium; }
.btn-accent { @apply bg-blue-600 text-white; }
.btn-accent:hover { @apply bg-blue-700; }
.btn-outline { @apply border border-gray-300 text-gray-700 bg-white; }
.btn-outline:hover { @apply bg-gray-50; }

/* Inputs */
input[type='number']::-webkit-outer-spin-button,
input[type='number']::-webkit-inner-spin-button { -webkit-appearance: none; margin: 0; }
input[type='number'] { -moz-appearance: textfield; }

/* Ensure table scroll does not cause page scroll */
.table-wrap { @apply overflow-x-auto; }
.table-inner { min-width: 720px; }

/* --- Finance grid tweaks --- */
.cell-name{ display:flex; align-items:center; gap:8px; padding-left:8px; }
.cell-name .chev{
  margin-left:auto;
  width:24px; height:24px;
  display:inline-flex; align-items:center; justify-content:center;
  border-radius:6px; cursor:pointer;
  color:#64748b;
}
.cell-name .chev:hover{ background:#f3f4f6; color:#111827; }
.cell-name .chev svg{ width:16px; height:16px; transition: transform .18s ease; }
.cell-name .chev.open svg{ transform: rotate(90deg); }

.finance-cell:hover{
  background:#f8fafc;
  outline:1px solid #e5e7eb;
  outline-offset:-1px;
}
.finance-cell .cell-btn{
  width:100%; height:100%;
  display:flex; align-items:center; justify-content:center;
  padding:6px 4px; border-radius:0;
}
.finance-grid{ overflow-x:hidden; }

/* --- Tasks tweaks --- */
.week-head{
  grid-column: 1 / -1;
  padding: 0; /* без вертикальных отступов */
  background: #fff;
}

/* --- Finance scroll fix (final) --- */
/* Скроллим ВНЕШНИЙ контейнер контента только на странице Финансы */
.content-scroll.finance-page{
  height: calc(100vh - 56px);
  overflow: auto !important;
}

/* Никаких overflow:visible для Finance — иначе скролл прячется */

/* Скрыть скроллбар на странице Финансов, но оставить прокрутку */
.content-scroll.finance-page {
  scrollbar-width: none;      /* Firefox */
  -ms-overflow-style: none;   /* IE/Edge */
}

.content-scroll.finance-page::-webkit-scrollbar {
  display: none;              /* Chrome, Safari, Opera */
}



/* --- Force light background (defensive override) --- */
html, body, #root {
  background-color: #ffffff !important;
  background-image: none !important;
}
