# Настройка функционала Привычки

## SQL схема

Выполните SQL скрипт для создания таблиц:

```bash
# Скопируйте содержимое scripts/create-habits-tables.sql и выполните в Supabase SQL Editor
```

Или выполните файл `scripts/create-habits-tables.sql` в Supabase SQL Editor.

## Структура

### Таблицы

1. **habits** - основная таблица привычек
   - `id` - UUID
   - `user_id` - UUID (ссылка на пользователя)
   - `title` - название привычки
   - `type` - тип: 'automatic', 'manual', 'progress'
   - `start_date` - дата начала
   - `end_date` - дата окончания (опционально)
   - `initial_value` - начальное значение (для progress)
   - `target_value` - целевое значение (для progress)
   - `current_value` - текущее значение (для progress)

2. **habit_entries** - записи о выполнении
   - `id` - UUID
   - `habit_id` - UUID (ссылка на привычку)
   - `date` - дата выполнения (YYYY-MM-DD)
   - `value` - значение (для progress типа)

### Типы привычек

1. **Автоматический (automatic)**
   - Автоматически считает дни с даты начала
   - Пример: "Бросить курить"
   - Не требует действий от пользователя

2. **Ручной (manual)**
   - Требует ежедневного подтверждения выполнения
   - Пример: "Принимать витамины"
   - Кнопка "Выполнить" на карточке
   - Отслеживает streak (серию дней)

3. **Прогресс (progress)**
   - Отслеживает прогресс от начального до конечного значения
   - Пример: "Накопить деньги"
   - Позволяет вводить значения, которые суммируются
   - Показывает процент прогресса

## Компоненты

- `src/pages/Habits.tsx` - основная страница
- `src/components/habits/HabitCard.tsx` - карточка привычки
- `src/components/habits/HabitModal.tsx` - модальное окно создания/редактирования
- `src/features/habits/api.ts` - API функции для работы с привычками
- `src/types/habits.ts` - типы TypeScript

## Использование

1. Перейдите в раздел "Привычки" в меню
2. Нажмите "Создать привычку"
3. Выберите тип привычки
4. Заполните необходимые поля
5. Сохраните

### Для автоматического типа:
- Просто создайте привычку с датой начала
- Система автоматически будет считать дни

### Для ручного типа:
- Создайте привычку
- Каждый день нажимайте "Выполнить" на карточке
- Система отслеживает streak (серию дней)

### Для прогресс типа:
- Создайте привычку с начальным и целевым значением
- Нажимайте "Добавить значение" и вводите прогресс
- Значения суммируются и показывается процент

## Особенности

- RLS (Row Level Security) настроен - пользователи видят только свои привычки
- Автоматическое обновление статистики
- Streak tracking для ручного типа
- Прогресс бар для progress типа
- Поддержка даты окончания (опционально)

